import{c as g,r as i,l as k,w as Q,f as W,p as U,a as V,b as ne,u as pe,d as N,j as e,g as be,h as Z,i as ae,S as je,k as ye,m as ve,n as Ne,o as oe,q as X,t as J,R as ke,e as we}from"./sparkles-DqlxV34A.js";import{Z as A,S as de,C as Se,U as R,a as L,T as z,P as Ce}from"./zap-BCJh6kZV.js";import{E as O,T as ce}from"./trending-up-4IBpDmlr.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=g("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=g("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=g("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=g("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=g("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=g("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=g("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=g("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=g("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=g("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=g("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=g("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=g("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=g("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=g("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=g("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=g("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=g("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=g("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=g("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=g("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=g("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=g("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=g("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=g("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=g("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Oe(){const[t,s]=i.useState([]),[r,n]=i.useState([]),[a,d]=i.useState("default"),[c,o]=i.useState(null),[u,l]=i.useState(null),[x,m]=i.useState([]),[f,j]=i.useState(null),[h,b]=i.useState("");return i.useEffect(()=>{(async()=>{const[v,G,E,P,y,F,fe]=await Promise.all([k.getValue(),U.getValue(),V.getValue(),ne.getValue(),pe.getValue(),Q.getValue(),W.getValue()]);s(v),n(G),d(E),o(P),l(y),m(F),j(fe);const M=await N.runtime.sendMessage({type:"GET_API_KEY",provider:P.aiProvider});M!=null&&M.apiKey&&b(M.apiKey)})();const w=k.watch(v=>{v&&s(v)}),S=Q.watch(v=>{v&&m(v)}),D=W.watch(v=>{v&&j(v)});return()=>{w(),S(),D()}},[]),{leads:t,personas:r,activePersonaId:a,settings:c,usage:u,groups:x,sessionLimits:f,apiKey:h,setApiKey:b}}function Be({sessionLimits:t,usage:s}){return e.jsxs("header",{className:"bg-background-secondary border-b border-border px-4 h-14 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(A,{className:"w-4 h-4 text-white"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:"LeadScout AI"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(t==null?void 0:t.isPaused)&&e.jsxs("span",{className:"text-xs text-foreground-secondary flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),"Paused"]}),s&&e.jsxs("span",{className:"px-2 py-1 rounded-full bg-card text-xs text-foreground-secondary",children:[s.leadsFoundToday," today"]}),e.jsx("button",{className:"text-foreground-muted hover:text-foreground-secondary transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})]})}function _e({sessionLimits:t}){const[s,r]=i.useState(!1),[n,a]=i.useState(null),d=async()=>{r(!0),a(null);try{const[u]=await N.tabs.query({active:!0,currentWindow:!0});if(u!=null&&u.id){const l=await N.tabs.sendMessage(u.id,{type:"MANUAL_SCAN"});a(l)}}catch(u){a({postsFound:0,leadsDetected:0,errors:[`Scan failed: ${u}`],timestamp:Date.now()})}finally{r(!1)}},c=(t==null?void 0:t.isPaused)??!1,o=s||c;return e.jsxs("div",{className:"bg-background p-4",children:[e.jsx("button",{onClick:d,disabled:o,className:`w-full flex items-center justify-center gap-2.5 h-12 rounded-xl font-semibold text-[15px] transition-colors ${o?"bg-card-elevated text-foreground-muted cursor-not-allowed":"bg-foreground text-background hover:bg-accent-hover"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-[18px] h-[18px] animate-spin"})," Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-[18px] h-[18px]"})," Scan This Page"]})}),n&&e.jsx(qe,{result:n})]})}function qe({result:t}){const s=t.errors.length>0;return e.jsx("div",{className:"mt-3 text-xs p-3 rounded-lg bg-card text-foreground-secondary",children:s?e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Se,{className:"w-3.5 h-3.5"}),t.errors[0]]}):e.jsxs("span",{children:["Found ",t.postsFound," posts, ",t.leadsDetected," leads detected"]})})}async function Ke(t,s){const r={success:!0,processed:0,failed:0,errors:[]},a=(await k.getValue()).map(d=>t.includes(d.id)?(r.processed++,{...d,status:s,contactedAt:Date.now()}):d);return r.processed!==t.length&&(r.failed=t.length-r.processed,r.errors.push(`${r.failed} leads not found`)),await k.setValue(a),r.success=r.failed===0,r}async function He(t){const s={success:!0,processed:0,failed:0,errors:[]},n=(await k.getValue()).filter(a=>t.includes(a.id)?(s.processed++,!1):!0);return s.processed!==t.length&&(s.failed=t.length-s.processed,s.errors.push(`${s.failed} leads not found`)),await k.setValue(n),s.success=s.failed===0,s}function Ye(t){const s=["ID","Author Name","Author Profile URL","Post URL","Post Text","Group Name","Intent","Lead Score","Status","Created At","Contacted At","AI Analysis","AI Draft Reply"],r=t.map(a=>{var d;return[a.id,C(a.authorName),a.authorProfileUrl,a.postUrl,C(a.postText.substring(0,500)),C(a.groupName||""),a.intent,a.leadScore.toString(),a.status,new Date(a.createdAt).toISOString(),a.contactedAt?new Date(a.contactedAt).toISOString():"",C(((d=a.aiAnalysis)==null?void 0:d.reasoning)||""),C(a.aiDraftReply||"")]});return[s.join(","),...r.map(a=>a.join(","))].join(`
`)}function Qe(t,s){const r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",s),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}function We(t,s){const r=t.filter(d=>s.includes(d.id)),n=Ye(r),a=new Date().toISOString().split("T")[0];Qe(n,`leadscout-leads-${a}.csv`)}function C(t){return t?t.includes(",")||t.includes('"')||t.includes(`
`)?`"${t.replace(/"/g,'""')}"`:t:'""'}function Ze(t){const[s,r]=i.useState(new Set),[n,a]=i.useState(!1),d=i.useCallback(h=>{r(b=>{const p=new Set(b);return p.has(h)?p.delete(h):p.add(h),p})},[]),c=i.useCallback(()=>{r(new Set(t.map(h=>h.id)))},[t]),o=i.useCallback(()=>{r(new Set)},[]),u=i.useCallback(()=>{a(!0)},[]),l=i.useCallback(()=>{a(!1),r(new Set)},[]),x=i.useCallback(h=>s.has(h),[s]),m=s.size,f=t.length>0&&s.size===t.length,j=s.size>0&&s.size<t.length;return{selectedIds:Array.from(s),selectedCount:m,isSelectionMode:n,allSelected:f,someSelected:j,toggleSelection:d,selectAll:c,deselectAll:o,enterSelectionMode:u,exitSelectionMode:l,isSelected:x}}function he(t){return new Date(t).toLocaleDateString()}function ee(t){const s=t.match(/facebook\.com\/groups\/([^/?]+)/);return s?s[1]:null}function te(t,s){return`https://www.facebook.com/groups/${t}/search?q=${encodeURIComponent(s.trim())}`}function Xe({lead:t,copiedId:s,onCopyReply:r,onStatusChange:n,onMarkResponded:a,onMarkGotReply:d,onFeedback:c}){return e.jsxs("div",{className:"px-4 pb-4 border-t border-border pt-3 space-y-3",children:[e.jsx(rt,{lead:t}),t.aiAnalysis&&e.jsxs("div",{className:"bg-card-elevated rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-foreground-muted mb-1",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-foreground-secondary",children:t.aiAnalysis.reasoning})]}),t.aiDraftReply&&e.jsx(Je,{lead:t,copiedId:s,onCopyReply:r}),e.jsx(et,{lead:t,onMarkResponded:a,onMarkGotReply:d}),e.jsx(tt,{lead:t,onFeedback:c}),e.jsx(st,{lead:t,onStatusChange:n})]})}function Je({lead:t,copiedId:s,onCopyReply:r}){return e.jsxs("div",{className:"bg-card-elevated rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs text-foreground-muted",children:"Suggested Reply"}),e.jsx("button",{onClick:n=>{n.stopPropagation(),r(t)},className:"flex items-center gap-1 text-xs text-foreground-secondary hover:text-foreground",children:s===t.id?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-3 h-3"})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-3 h-3"})," Copy"]})})]}),e.jsx("p",{className:"text-sm text-foreground-secondary",children:t.aiDraftReply})]})}function et({lead:t,onMarkResponded:s,onMarkGotReply:r}){var n,a;return e.jsxs("div",{className:"flex items-center gap-2 py-2 border-t border-border",children:[e.jsx("span",{className:"text-xs text-foreground-muted",children:"Track:"}),(n=t.responseTracking)!=null&&n.responded?(a=t.responseTracking)!=null&&a.gotReply?e.jsxs("span",{className:"text-xs text-foreground-secondary flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"})," Conversation started"]}):e.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-xs px-2 py-1 bg-card-elevated text-foreground-secondary rounded-lg hover:bg-zinc-600 hover:text-foreground",children:[e.jsx(q,{className:"w-3 h-3"})," Got Reply"]}):e.jsxs("button",{onClick:s,className:"flex items-center gap-1 text-xs px-2 py-1 bg-card-elevated text-foreground-secondary rounded-lg hover:bg-zinc-600 hover:text-foreground",children:[e.jsx(xe,{className:"w-3 h-3"})," I Responded"]})]})}function tt({lead:t,onFeedback:s}){var r,n;return e.jsxs("div",{className:"flex items-center gap-2 py-2 border-t border-border",children:[e.jsx("span",{className:"text-xs text-foreground-muted",children:"Lead quality:"}),e.jsx("button",{onClick:a=>s(a,"good"),className:`p-1.5 rounded-lg ${((r=t.feedback)==null?void 0:r.quality)==="good"?"bg-zinc-600 text-foreground":"text-foreground-muted hover:bg-card-elevated hover:text-foreground-secondary"}`,children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a=>s(a,"bad"),className:`p-1.5 rounded-lg ${((n=t.feedback)==null?void 0:n.quality)==="bad"?"bg-zinc-600 text-foreground":"text-foreground-muted hover:bg-card-elevated hover:text-foreground-secondary"}`,children:e.jsx(me,{className:"w-4 h-4"})})]})}function st({lead:t,onStatusChange:s}){return e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex gap-2",children:[t.status==="new"&&e.jsx("button",{onClick:r=>{r.stopPropagation(),s(t.id,"contacted")},className:"text-xs px-3 py-1.5 bg-foreground text-background rounded-lg font-medium hover:bg-accent-hover",children:"Mark Contacted"}),t.status==="contacted"&&e.jsx("button",{onClick:r=>{r.stopPropagation(),s(t.id,"converted")},className:"text-xs px-3 py-1.5 bg-foreground text-background rounded-lg font-medium hover:bg-accent-hover",children:"Mark Converted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("a",{href:t.postUrl,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),className:"flex items-center gap-1 text-xs text-foreground-secondary hover:text-foreground hover:underline",children:[e.jsx(O,{className:"w-3 h-3"})," View Post"]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),s(t.id,"ignored")},className:"p-1 text-foreground-muted hover:text-red-400",children:e.jsx(z,{className:"w-4 h-4"})})]})]})}function rt({lead:t}){const[s,r]=i.useState(!1),[n,a]=i.useState(null),d=async o=>{o.stopPropagation(),r(!0),a(null);try{const u=await chrome.runtime.sendMessage({type:"FETCH_LEAD_LCI",leadId:t.id});u.error&&a(u.error)}catch{a("Failed to fetch profile data")}finally{r(!1)}};if(!t.lci&&!s)return e.jsxs("div",{className:"bg-card-elevated rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-foreground-secondary"}),e.jsx("span",{className:"text-xs text-foreground-secondary font-medium",children:"Lead Context Intelligence"})]}),e.jsx("button",{onClick:d,disabled:s,className:"text-xs px-3 py-1.5 bg-foreground text-background rounded-lg font-medium hover:bg-accent-hover disabled:opacity-50",children:"Fetch Profile"})]}),n&&e.jsx("p",{className:"text-xs text-red-400 mt-2",children:n})]});if(s)return e.jsx("div",{className:"bg-card-elevated rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-foreground-secondary animate-spin"}),e.jsx("span",{className:"text-xs text-foreground-secondary",children:"Fetching profile data..."})]})});if(!t.lci)return null;const{lci:c}=t;return e.jsxs("div",{className:"bg-card-elevated rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-foreground-secondary"}),e.jsx("span",{className:"text-xs text-foreground-secondary font-medium",children:"Lead Context Intelligence"})]}),e.jsxs("span",{className:"text-xs text-foreground-muted",children:[c.confidenceScore,"% confidence"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[c.workplace&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-secondary",children:[e.jsx(Ae,{className:"w-3 h-3 text-foreground-muted"}),e.jsx("span",{children:c.workplace})]}),c.location&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-secondary",children:[e.jsx(Ge,{className:"w-3 h-3 text-foreground-muted"}),e.jsx("span",{children:c.location})]}),c.education&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-secondary",children:[e.jsx(Te,{className:"w-3 h-3 text-foreground-muted"}),e.jsx("span",{children:c.education})]}),c.profileBio&&e.jsxs("p",{className:"text-xs text-foreground-muted mt-2 italic",children:['"',c.profileBio,'"']})]}),e.jsxs("p",{className:"text-xs text-foreground-muted mt-2",children:["Fetched ",new Date(c.fetchedAt).toLocaleDateString()]})]})}function nt({lead:t,copiedId:s,onCopyReply:r,onStatusChange:n,isSelectionMode:a=!1,isSelected:d=!1,onToggleSelect:c}){const[o,u]=i.useState(!1),l=async h=>{h.stopPropagation(),await Z(t.id,{responded:!0,respondedAt:Date.now()}),await ae(t.id,"contacted")},x=async h=>{h.stopPropagation(),await Z(t.id,{gotReply:!0,repliedAt:Date.now()})},m=async(h,b)=>{h.stopPropagation(),await be(t.id,{quality:b,givenAt:Date.now()})},f=()=>{a&&c?c(t.id):u(!o)},j=d?"border-foreground ring-2 ring-card-elevated":"border-border";return e.jsxs("div",{className:`bg-card rounded-xl border overflow-hidden ${j}`,children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-card-elevated flex gap-3",onClick:f,children:[a&&e.jsx("div",{className:"flex items-start pt-1",children:e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${d?"bg-foreground border-foreground":"border-foreground-muted hover:border-foreground-secondary"}`,children:d&&e.jsx(L,{className:"w-3 h-3 text-background"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(at,{lead:t}),e.jsx("p",{className:"text-sm text-foreground-secondary line-clamp-2",children:t.postText}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-foreground-muted",children:[e.jsx("span",{className:"capitalize",children:t.intent.replace("_"," ")}),e.jsx("span",{children:"-"}),e.jsx("span",{children:he(t.createdAt)})]})]})]}),o&&!a&&e.jsx(Xe,{lead:t,copiedId:s,onCopyReply:r,onStatusChange:n,onMarkResponded:l,onMarkGotReply:x,onFeedback:m})]})}function at({lead:t}){var s,r;return e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground truncate",children:t.authorName}),e.jsx(ot,{score:t.leadScore}),((s=t.responseTracking)==null?void 0:s.responded)&&e.jsx("span",{title:"Responded",children:e.jsx(xe,{className:"w-3 h-3 text-foreground-secondary"})}),((r=t.responseTracking)==null?void 0:r.gotReply)&&e.jsx("span",{title:"Got reply",children:e.jsx(q,{className:"w-3 h-3 text-foreground-secondary"})}),e.jsx(ct,{feedback:t.feedback})]}),t.groupName&&e.jsx("p",{className:"text-xs text-foreground-muted mt-0.5",children:t.groupName})]}),e.jsx(dt,{status:t.status})]})}function ot({score:t}){return e.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-card-elevated text-foreground-secondary",children:[t,"%"]})}function dt({status:t}){return e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-card-elevated text-foreground-secondary uppercase",children:t})}function ct({feedback:t}){return t?t.quality==="good"?e.jsx(ge,{className:"w-3 h-3 text-foreground-secondary"}):t.quality==="bad"?e.jsx(me,{className:"w-3 h-3 text-foreground-secondary"}):null:null}function lt({selectedCount:t,totalCount:s,allSelected:r,onSelectAll:n,onDeselectAll:a,onMarkContacted:d,onGenerateReplies:c,onExport:o,onDelete:u,onCancel:l,isProcessing:x=!1}){return e.jsxs("div",{className:"bg-card border border-border rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:l,className:"p-1 text-foreground-muted hover:text-foreground hover:bg-card-elevated rounded",title:"Cancel selection",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:[t," selected"]})]}),e.jsxs("button",{onClick:r?a:n,className:"flex items-center gap-1.5 text-xs text-foreground-secondary hover:text-foreground font-medium",children:[e.jsx($e,{className:"w-3.5 h-3.5"}),r?"Deselect All":`Select All (${s})`]})]}),e.jsxs("div",{className:"flex items-center gap-1 p-2",children:[e.jsx(I,{icon:q,label:"Contacted",onClick:d,disabled:t===0||x,variant:"default"}),e.jsx(I,{icon:je,label:"AI Replies",onClick:c,disabled:t===0||x,variant:"default"}),e.jsx(I,{icon:Me,label:"Export",onClick:o,disabled:t===0||x,variant:"default"}),e.jsx(I,{icon:z,label:"Delete",onClick:u,disabled:t===0||x,variant:"destructive"})]})]})}const it={default:"bg-card-elevated text-foreground-secondary hover:bg-zinc-600 hover:text-foreground disabled:bg-card disabled:text-foreground-muted",destructive:"bg-card-elevated text-red-400 hover:bg-red-500/20 hover:text-red-300 disabled:bg-card disabled:text-foreground-muted"};function I({icon:t,label:s,onClick:r,disabled:n,variant:a}){return e.jsxs("button",{onClick:r,disabled:n,className:`flex-1 flex flex-col items-center gap-1 py-2 px-2 rounded-lg text-xs font-medium transition-colors ${it[a]}`,children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{children:s})]})}function ut({leads:t}){const[s,r]=i.useState("all"),[n,a]=i.useState(null),[d,c]=i.useState(!1),o=t.filter(y=>s==="all"?!0:y.status===s),{selectedIds:u,selectedCount:l,isSelectionMode:x,allSelected:m,toggleSelection:f,selectAll:j,deselectAll:h,enterSelectionMode:b,exitSelectionMode:p,isSelected:w}=Ze(o),S=async y=>{y.aiDraftReply&&(await navigator.clipboard.writeText(y.aiDraftReply),a(y.id),setTimeout(()=>a(null),2e3))},D=async(y,F)=>{await ae(y,F)},v=async()=>{u.length!==0&&(c(!0),await Ke(u,"contacted"),p(),c(!1))},G=async()=>{u.length!==0&&(c(!0),chrome.runtime.sendMessage({type:"BULK_GENERATE_REPLIES",leadIds:u}),c(!1))},E=()=>{u.length!==0&&We(t,u)},P=async()=>{u.length!==0&&confirm(`Delete ${u.length} leads? This cannot be undone.`)&&(c(!0),await He(u),p(),c(!1))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(xt,{leads:t,filter:s,setFilter:r}),!x&&o.length>0&&e.jsxs("button",{onClick:b,className:"flex items-center gap-1.5 text-xs text-foreground-muted hover:text-foreground font-medium px-2 py-1 rounded hover:bg-card transition-colors",children:[e.jsx(Le,{className:"w-4 h-4"}),"Select"]})]}),x&&e.jsx(lt,{selectedCount:l,totalCount:o.length,allSelected:m,onSelectAll:j,onDeselectAll:h,onMarkContacted:v,onGenerateReplies:G,onExport:E,onDelete:P,onCancel:p,isProcessing:d}),o.length===0?e.jsx(mt,{}):e.jsx("div",{className:"space-y-3",children:o.map(y=>e.jsx(nt,{lead:y,copiedId:n,onCopyReply:S,onStatusChange:D,isSelectionMode:x,isSelected:w(y.id),onToggleSelect:f},y.id))})]})}function xt({leads:t,filter:s,setFilter:r}){const n={all:t.length,new:t.filter(a=>a.status==="new").length,contacted:t.filter(a=>a.status==="contacted").length,converted:t.filter(a=>a.status==="converted").length};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-foreground-muted"}),e.jsxs("select",{value:s,onChange:a=>r(a.target.value),className:"text-sm border border-border rounded-lg px-2 py-1.5 bg-card text-foreground",children:[e.jsxs("option",{value:"all",children:["All (",n.all,")"]}),e.jsxs("option",{value:"new",children:["New (",n.new,")"]}),e.jsxs("option",{value:"contacted",children:["Contacted (",n.contacted,")"]}),e.jsxs("option",{value:"converted",children:["Converted (",n.converted,")"]})]})]})}function mt(){return e.jsxs("div",{className:"text-center py-8 text-foreground-muted",children:[e.jsx(ie,{className:"w-12 h-12 mx-auto mb-3 text-foreground-muted"}),e.jsx("p",{className:"text-foreground-secondary",children:"No leads found"}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Scan This Page" on a Facebook group'})]})}function gt({group:t}){const s=async()=>{await N.runtime.sendMessage({type:"OPEN_GROUP",url:t.url,groupId:t.id})},r=async()=>{await ye(t.id,{isActive:!t.isActive})},n=async()=>{await ve(t.id)};return e.jsx("div",{className:`bg-card rounded-xl border p-3 ${t.isActive?"border-border":"border-border-subtle opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-foreground truncate",children:t.name}),e.jsx("p",{className:"text-xs text-foreground-muted mt-0.5",children:t.category}),e.jsxs("p",{className:"text-xs text-foreground-muted mt-1",children:[t.leadsFound," leads â€¢ Last visited ",t.lastVisited?he(t.lastVisited):"Never"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:s,className:"p-1.5 text-foreground-secondary hover:bg-card-elevated rounded",title:"Visit group",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r,className:`p-1.5 rounded ${t.isActive?"text-foreground-secondary hover:bg-card-elevated":"text-foreground-muted hover:bg-card-elevated"}`,title:t.isActive?"Pause":"Activate",children:t.isActive?e.jsx(Ee,{className:"w-4 h-4"}):e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n,className:"p-1.5 text-foreground-muted hover:text-foreground-secondary hover:bg-card-elevated rounded",title:"Remove",children:e.jsx(z,{className:"w-4 h-4"})})]})]})})}function ht({groups:t}){const[s,r]=i.useState(""),[n,a]=i.useState(null),[d,c]=i.useState(""),[o,u]=i.useState(""),[l,x]=i.useState("general"),m=async()=>{!d||!o||(await Ne({name:o,url:d,category:l,isActive:!0}),c(""),u(""),x("general"))},f=h=>{if(!s.trim())return;const b=ee(h.url);b&&window.open(te(b,s),"_blank")},j=(h,b)=>{const p=ee(h.url);p&&window.open(te(p,b),"_blank")};return e.jsxs("div",{className:"space-y-4",children:[t.length>0&&e.jsx(ft,{groups:t,searchQuery:s,setSearchQuery:r,selectedGroupForSearch:n,setSelectedGroupForSearch:a,onSearchInGroup:f,onQuickSearch:j}),e.jsx(pt,{newGroupUrl:d,setNewGroupUrl:c,newGroupName:o,setNewGroupName:u,newGroupCategory:l,setNewGroupCategory:x,onAddGroup:m}),t.length===0?e.jsx(bt,{}):e.jsx(jt,{groups:t})]})}function ft({groups:t,searchQuery:s,setSearchQuery:r,selectedGroupForSearch:n,setSelectedGroupForSearch:a,onSearchInGroup:d,onQuickSearch:c}){const o=t.find(l=>l.id===n),u=["need help","looking for","recommendations","any suggestions","who can"];return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4",children:[e.jsxs("h3",{className:"font-medium text-foreground mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Search in Groups"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:l=>r(l.target.value),placeholder:"Search keywords (e.g., 'need help with website')",className:"flex-1 border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm placeholder:text-foreground-muted",onKeyDown:l=>{l.key==="Enter"&&o&&d(o)}}),e.jsxs("select",{value:n||"",onChange:l=>a(l.target.value||null),className:"border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm min-w-[140px]",children:[e.jsx("option",{value:"",children:"Select group"}),t.filter(l=>l.isActive).map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("button",{onClick:()=>o&&d(o),disabled:!s.trim()||!n,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-foreground text-background text-sm font-medium rounded-lg hover:bg-accent-hover disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(O,{className:"w-4 h-4"}),"Search in Facebook Group"]}),e.jsx("p",{className:"text-xs text-foreground-muted",children:`Opens Facebook's native search. Click "Scan This Page" on search results to find leads.`}),e.jsxs("div",{className:"border-t border-border pt-3",children:[e.jsx("p",{className:"text-xs text-foreground-muted mb-2",children:"Quick searches:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.map(l=>e.jsx("button",{onClick:()=>{o?c(o,l):r(l)},className:"text-xs px-2 py-1 bg-card-elevated text-foreground-secondary rounded hover:bg-border",children:l},l))})]})]})]})}function pt({newGroupUrl:t,setNewGroupUrl:s,newGroupName:r,setNewGroupName:n,newGroupCategory:a,setNewGroupCategory:d,onAddGroup:c}){return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4",children:[e.jsx("h3",{className:"font-medium text-foreground mb-3",children:"Add Group"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:t,onChange:o=>s(o.target.value),placeholder:"Facebook group URL",className:"w-full border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm placeholder:text-foreground-muted"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:o=>n(o.target.value),placeholder:"Group name",className:"flex-1 border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm placeholder:text-foreground-muted"}),e.jsxs("select",{value:a,onChange:o=>d(o.target.value),className:"border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"tech",children:"Tech"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"freelance",children:"Freelance"})]})]}),e.jsxs("button",{onClick:c,disabled:!t||!r,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-foreground text-background text-sm font-medium rounded-lg hover:bg-accent-hover disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Add Group"]})]})]})}function bt(){return e.jsxs("div",{className:"text-center py-8 text-foreground-muted",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-3 text-foreground-muted"}),e.jsx("p",{className:"text-foreground-secondary",children:"No groups added"}),e.jsx("p",{className:"text-sm mt-1",children:"Add Facebook groups to track"})]})}function jt({groups:t}){return e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsx(gt,{group:s},s.id))})}function yt({personas:t,activePersonaId:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-foreground-muted",children:"Configure personas with different keywords and AI tones for various use cases."}),t.map(r=>e.jsx(vt,{persona:r,isActive:r.id===s},r.id))]})}function vt({persona:t,isActive:s}){const r=async()=>{await V.setValue(t.id)};return e.jsxs("div",{className:`bg-card rounded-xl border p-4 ${s?"border-foreground ring-1 ring-foreground":"border-border"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-foreground",children:t.name}),e.jsx("p",{className:"text-sm text-foreground-muted",children:t.role})]}),!s&&e.jsx("button",{onClick:r,className:"text-xs text-foreground-secondary hover:text-foreground",children:"Set active"})]}),e.jsxs("div",{className:"text-xs text-foreground-secondary space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground-secondary",children:"Keywords:"})," ",t.keywords.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground-secondary",children:"Tone:"})," ",t.aiTone]})]})]})}function Nt({settings:t,sessionLimits:s,apiKey:r,setApiKey:n}){const a=async(o,u)=>{const l={...t,[o]:u};await ne.setValue(l)},d=async()=>{await N.runtime.sendMessage({type:"SET_API_KEY",provider:t.aiProvider,apiKey:r})},c=async()=>{await N.runtime.sendMessage({type:"RESET_SESSION_LIMITS"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(kt,{sessionLimits:s,onReset:c}),e.jsx(wt,{settings:t,apiKey:r,setApiKey:n,onSettingChange:a,onSaveApiKey:d}),e.jsx(St,{settings:t,onSettingChange:a})]})}function kt({sessionLimits:t,onReset:s}){return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-foreground",children:"Session Limits"}),e.jsx("button",{onClick:s,className:"text-xs text-foreground-secondary hover:text-foreground",children:"Reset"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-card-elevated rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground-muted mb-1",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:"Posts/Hour"})]}),e.jsxs("p",{className:"text-lg font-medium text-foreground",children:[t.postsScannedThisHour," / ",t.maxPostsPerHour]})]}),e.jsxs("div",{className:"bg-card-elevated rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground-muted mb-1",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Groups/Day"})]}),e.jsxs("p",{className:"text-lg font-medium text-foreground",children:[t.groupsVisitedToday," / ",t.maxGroupsPerDay]})]})]}),t.isPaused&&t.pausedUntil&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-foreground-secondary text-sm bg-card-elevated p-2 rounded-lg",children:[e.jsx(K,{className:"w-4 h-4"}),"Paused until ",new Date(t.pausedUntil).toLocaleTimeString()]})]})}function wt({settings:t,apiKey:s,setApiKey:r,onSettingChange:n,onSaveApiKey:a}){return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4",children:[e.jsx("h3",{className:"font-medium text-foreground mb-4",children:"AI Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"AI Provider"}),e.jsxs("select",{value:t.aiProvider,onChange:d=>n("aiProvider",d.target.value),className:"w-full border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"gemini",children:"Google Gemini"}),e.jsx("option",{value:"openai",children:"OpenAI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:s,onChange:d=>r(d.target.value),placeholder:`Enter ${t.aiProvider} API key`,className:"flex-1 border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm placeholder:text-foreground-muted"}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-foreground text-background text-sm font-medium rounded-lg hover:bg-accent-hover",children:"Save"})]})]})]})]})}function St({settings:t,onSettingChange:s}){return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4",children:[e.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Scanning Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"Scan Mode"}),e.jsxs("select",{value:t.scanMode,onChange:r=>s("scanMode",r.target.value),className:"w-full border border-border bg-background text-foreground rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"manual",children:"Manual (Recommended)"}),e.jsx("option",{value:"auto",children:"Automatic"})]}),e.jsx("p",{className:"text-xs text-foreground-muted mt-1",children:"Manual mode is safer and more Facebook-compliant"})]}),e.jsx(T,{checked:t.isEnabled,onChange:r=>s("isEnabled",r),label:"Enable extension"}),e.jsx(T,{checked:t.autoAnalyze,onChange:r=>s("autoAnalyze",r),label:"Auto-analyze with AI"}),e.jsx(T,{checked:t.showOverlay,onChange:r=>s("showOverlay",r),label:"Show overlay on Facebook"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:["Minimum lead score: ",t.minLeadScore]}),e.jsx("input",{type:"range",min:"0",max:"100",value:t.minLeadScore,onChange:r=>s("minLeadScore",parseInt(r.target.value)),className:"w-full accent-foreground"})]}),e.jsx(T,{checked:t.transparencyEnabled,onChange:r=>s("transparencyEnabled",r),label:"Add AI disclosure to replies"})]})]})}function T({checked:t,onChange:s,label:r}){return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:n=>s(n.target.checked),className:"w-4 h-4 accent-foreground rounded"}),e.jsx("span",{className:"text-sm text-foreground-secondary",children:r})]})}function Ct({onComplete:t}){const[s,r]=i.useState("welcome"),[n,a]=i.useState(""),[d,c]=i.useState("gemini"),[o,u]=i.useState({name:"",role:"",keywords:"",valueProposition:"",aiTone:"professional"}),l=["welcome","api-key","persona","ready"],x=l.indexOf(s),m=()=>{const p=x+1;p<l.length&&r(l[p])},f=()=>{const p=x-1;p>=0&&r(l[p])},j=async()=>{n.trim()&&(await N.runtime.sendMessage({type:"SET_API_KEY",provider:d,apiKey:n}),m())},h=async()=>{if(!o.name.trim()||!o.role.trim())return;const p={id:`persona_${Date.now()}`,name:o.name,role:o.role,keywords:o.keywords.split(",").map(S=>S.trim()).filter(Boolean),negativeKeywords:[],aiTone:o.aiTone,valueProposition:o.valueProposition,isActive:!0,createdAt:Date.now()},w=await U.getValue();await U.setValue([p,...w]),await V.setValue(p.id),m()},b=async()=>{await oe.setValue(!0),t()};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(At,{currentIndex:x,totalSteps:l.length}),e.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[s==="welcome"&&e.jsx(Pt,{onNext:m}),s==="api-key"&&e.jsx(Mt,{apiKey:n,setApiKey:a,aiProvider:d,setAiProvider:c,onNext:j,onBack:f}),s==="persona"&&e.jsx(It,{persona:o,setPersona:u,onNext:h,onBack:f}),s==="ready"&&e.jsx(Tt,{onFinish:b,onBack:f})]})]})}function At({currentIndex:t,totalSteps:s}){return e.jsx("div",{className:"px-6 pt-6",children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:s}).map((r,n)=>e.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${n<=t?"bg-foreground":"bg-card"}`},n))})})}function Pt({onNext:t}){return e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6",children:e.jsx(A,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"LeadScout AI"}),e.jsx("p",{className:"text-foreground-secondary mb-8 max-w-xs",children:"Find clients in Facebook groups"}),e.jsxs("div",{className:"space-y-4 w-full max-w-xs text-left",children:[e.jsx($,{icon:e.jsx(Ue,{className:"w-5 h-5 text-foreground-secondary"}),title:"Smart Lead Detection",description:"AI finds people looking for your services"}),e.jsx($,{icon:e.jsx(ie,{className:"w-5 h-5 text-foreground-secondary"}),title:"Draft Responses",description:"Get AI-generated replies for each lead"}),e.jsx($,{icon:e.jsx(ce,{className:"w-5 h-5 text-foreground-secondary"}),title:"Track Results",description:"Monitor outreach and conversion rates"})]})]}),e.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 bg-foreground text-background h-[52px] rounded-xl font-semibold hover:bg-accent-hover transition-colors",children:["Get Started",e.jsx(_,{className:"w-5 h-5"})]})]})}function $({icon:t,title:s,description:r}){return e.jsxs("div",{className:"flex items-start gap-3 bg-foreground rounded-xl p-4",children:[e.jsx("div",{className:"mt-0.5",children:t}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-background",children:s}),e.jsx("p",{className:"text-sm text-foreground-muted",children:r})]})]})}function Mt({apiKey:t,setApiKey:s,aiProvider:r,setAiProvider:n,onNext:a,onBack:d}){const c=t.trim().length>10;return e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-card rounded-xl flex items-center justify-center",children:e.jsx(Re,{className:"w-5 h-5 text-foreground-secondary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:"Connect AI Provider"}),e.jsx("p",{className:"text-sm text-foreground-muted",children:"Required for lead analysis"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-2",children:"AI Provider"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(se,{selected:r==="gemini",onClick:()=>n("gemini"),title:"Google Gemini",subtitle:"Free tier available"}),e.jsx(se,{selected:r==="openai",onClick:()=>n("openai"),title:"OpenAI",subtitle:"GPT-4o-mini"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-2",children:"API Key"}),e.jsx("input",{type:"password",value:t,onChange:o=>s(o.target.value),placeholder:r==="gemini"?"AIza...":"sk-...",className:"w-full border border-border bg-card text-foreground rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-foreground focus:border-foreground placeholder:text-foreground-muted"})]}),e.jsx("div",{className:"bg-card rounded-xl p-3 border border-border",children:e.jsx("p",{className:"text-sm text-foreground-secondary",children:r==="gemini"?e.jsxs(e.Fragment,{children:["Get your free API key from ",e.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium text-foreground",children:"Google AI Studio"})]}):e.jsxs(e.Fragment,{children:["Get your API key from ",e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium text-foreground",children:"OpenAI Platform"})]})})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-1 px-4 py-3 text-foreground-muted hover:text-foreground-secondary rounded-lg transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),"Back"]}),e.jsxs("button",{onClick:a,disabled:!c,className:"flex-1 flex items-center justify-center gap-2 bg-foreground text-background h-[52px] rounded-xl font-semibold hover:bg-accent-hover transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",e.jsx(_,{className:"w-5 h-5"})]})]})]})}function se({selected:t,onClick:s,title:r,subtitle:n}){return e.jsxs("button",{onClick:s,className:`p-4 rounded-xl border text-left transition-colors ${t?"border-foreground bg-card":"border-border bg-card hover:border-foreground-muted"}`,children:[e.jsx("p",{className:"font-semibold text-foreground",children:r}),e.jsx("p",{className:`text-xs ${t?"text-foreground-secondary":"text-foreground-muted"}`,children:n})]})}function It({persona:t,setPersona:s,onNext:r,onBack:n}){const a=t.name.trim()&&t.role.trim()&&t.keywords.trim(),d=[{name:"Web Developer",role:"Freelance Web Developer",keywords:"need website, looking for developer, who can build, web developer needed"},{name:"Designer",role:"Graphic Designer",keywords:"need logo, looking for designer, brand design, graphic designer"},{name:"Marketing",role:"Digital Marketing Consultant",keywords:"need marketing, looking for ads, social media help, seo help"}],c=o=>{s({...t,name:o.name,role:o.role,keywords:o.keywords})};return e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-card rounded-xl flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-foreground-secondary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:"Create Your Persona"}),e.jsx("p",{className:"text-sm text-foreground-muted",children:"Tell us what leads you're looking for"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-foreground-muted mb-2",children:"QUICK START"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:d.map(o=>e.jsx("button",{onClick:()=>c(o),className:"px-3 py-1.5 text-xs bg-card text-foreground-secondary rounded-full hover:bg-card-elevated transition-colors",children:o.name},o.name))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"Persona Name"}),e.jsx("input",{type:"text",value:t.name,onChange:o=>s({...t,name:o.target.value}),placeholder:"e.g., Web Developer",className:"w-full border border-border bg-card text-foreground rounded-xl px-3 py-2.5 text-sm focus:ring-2 focus:ring-foreground focus:border-foreground placeholder:text-foreground-muted"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"Your Role"}),e.jsx("input",{type:"text",value:t.role,onChange:o=>s({...t,role:o.target.value}),placeholder:"e.g., Freelance Full-Stack Developer",className:"w-full border border-border bg-card text-foreground rounded-xl px-3 py-2.5 text-sm focus:ring-2 focus:ring-foreground focus:border-foreground placeholder:text-foreground-muted"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"Keywords to Match"}),e.jsx("textarea",{value:t.keywords,onChange:o=>s({...t,keywords:o.target.value}),placeholder:"need website, looking for developer, who can build (comma separated)",rows:2,className:"w-full border border-border bg-card text-foreground rounded-xl px-3 py-2.5 text-sm focus:ring-2 focus:ring-foreground focus:border-foreground resize-none placeholder:text-foreground-muted"}),e.jsx("p",{className:"text-xs text-foreground-muted mt-1",children:"Posts containing these keywords will be analyzed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"Your Value Proposition"}),e.jsx("textarea",{value:t.valueProposition,onChange:o=>s({...t,valueProposition:o.target.value}),placeholder:"I build fast, responsive websites that help businesses grow...",rows:2,className:"w-full border border-border bg-card text-foreground rounded-xl px-3 py-2.5 text-sm focus:ring-2 focus:ring-foreground focus:border-foreground resize-none placeholder:text-foreground-muted"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:"Response Tone"}),e.jsxs("select",{value:t.aiTone,onChange:o=>s({...t,aiTone:o.target.value}),className:"w-full border border-border bg-card text-foreground rounded-xl px-3 py-2.5 text-sm focus:ring-2 focus:ring-foreground focus:border-foreground",children:[e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"casual",children:"Casual"}),e.jsx("option",{value:"friendly",children:"Friendly"}),e.jsx("option",{value:"expert",children:"Expert"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-1 px-4 py-3 text-foreground-muted hover:text-foreground-secondary rounded-lg transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),"Back"]}),e.jsxs("button",{onClick:r,disabled:!a,className:"flex-1 flex items-center justify-center gap-2 bg-foreground text-background h-[52px] rounded-xl font-semibold hover:bg-accent-hover transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",e.jsx(_,{className:"w-5 h-5"})]})]})]})}function Tt({onFinish:t,onBack:s}){const r=[{num:1,text:"Go to a Facebook group with your target audience"},{num:2,text:'Click "Scan This Page" to analyze posts'},{num:3,text:"Review detected leads and their AI scores"},{num:4,text:"Copy the draft response or customize it"},{num:5,text:"Navigate to the post and reply!"}];return e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-foreground-secondary rounded-full flex items-center justify-center mb-6",children:e.jsx(Fe,{className:"w-8 h-8 text-background"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:"You're All Set!"}),e.jsx("p",{className:"text-foreground-secondary mb-8",children:"Here's how to find your first leads:"}),e.jsx("div",{className:"w-full max-w-xs space-y-3 text-left",children:r.map(n=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-card rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs font-bold text-foreground",children:n.num})}),e.jsx("p",{className:"text-sm text-foreground-secondary",children:n.text})]},n.num))})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-1 px-4 py-3 text-foreground-muted hover:text-foreground-secondary rounded-lg transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),"Back"]}),e.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center gap-2 bg-foreground-secondary text-background h-[52px] rounded-xl font-semibold hover:bg-foreground-muted transition-colors",children:[e.jsx(L,{className:"w-5 h-5"}),"Start Finding Leads"]})]})]})}function Rt(t){if(!t.lastScanAt)return 0;const s=t.scanIntervalMinutes*60*1e3,r=Date.now()-t.lastScanAt;return Math.max(0,s-r)}function Lt(t){if(t<=0)return"Now";const s=Math.floor(t/6e4),r=Math.floor(t%6e4/1e3);return s>0?`${s}m ${r}s`:`${r}s`}function Dt(){const[t,s]=i.useState(null),[r,n]=i.useState(null),[a,d]=i.useState("");i.useEffect(()=>{X.getValue().then(s),J.getValue().then(n);const x=X.watch(f=>{s(f)}),m=J.watch(f=>{n(f)});return()=>{x(),m()}},[]),i.useEffect(()=>{if(!t)return;const x=()=>{const f=Rt(t);d(Lt(f))};x();const m=setInterval(x,1e3);return()=>clearInterval(m)},[t]);const c=i.useCallback(async x=>{await chrome.runtime.sendMessage({type:"UPDATE_AUTOMATION_SETTINGS",settings:x})},[]),o=i.useCallback(async()=>{await chrome.runtime.sendMessage({type:"START_SCHEDULER"})},[]),u=i.useCallback(async()=>{await chrome.runtime.sendMessage({type:"STOP_SCHEDULER"})},[]),l=(r==null?void 0:r.queue.filter(x=>x.status==="pending"||x.status==="running"))||[];return{settings:t,state:r,pendingTasks:l,timeUntilNextScan:a,updateSettings:c,startAutomation:o,stopAutomation:u,isRunning:(r==null?void 0:r.isRunning)||!1}}const Gt=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hour"},{value:120,label:"2 hours"}],Et=[1,2,3,5,10],re=[{min:3,max:8,label:"3-8 sec"},{min:5,max:15,label:"5-15 sec"},{min:10,max:30,label:"10-30 sec"},{min:15,max:45,label:"15-45 sec"}];function Ft(){const{settings:t,pendingTasks:s,updateSettings:r}=Dt(),[n,a]=i.useState(!1);if(!t)return e.jsx("div",{className:"flex items-center justify-center py-8 text-foreground-muted",children:"Loading..."});const d=async()=>{await r({enabled:!t.enabled})},c=m=>{r({scanIntervalMinutes:m})},o=m=>{r({groupsPerCycle:m})},u=(m,f)=>{r({delayMinSeconds:m,delayMaxSeconds:f})},l=async()=>{a(!0),await new Promise(m=>setTimeout(m,500)),a(!1)},x=t.isPro;return e.jsxs("div",{className:"space-y-4",children:[!x&&e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"w-5 h-5 text-foreground-secondary"}),e.jsx("span",{className:"font-semibold text-foreground",children:"PRO Feature"})]}),e.jsx("p",{className:"text-sm text-foreground-secondary",children:"Upgrade to PRO to enable automated scanning and group rotation."})]}),e.jsx($t,{enabled:t.enabled,interval:t.scanIntervalMinutes,onToggle:d,onIntervalChange:c,disabled:!x}),e.jsx(Ut,{groupsPerCycle:t.groupsPerCycle,onGroupsChange:o,disabled:!x}),e.jsx(Vt,{minDelay:t.delayMinSeconds,maxDelay:t.delayMaxSeconds,onDelayChange:u,disabled:!x}),s.length>0&&e.jsx(zt,{tasks:s}),e.jsx("button",{onClick:l,disabled:n||!x,className:"w-full bg-foreground hover:bg-accent-hover disabled:bg-card-elevated disabled:cursor-not-allowed text-background font-semibold py-3 rounded-xl transition-colors",children:n?"Saving...":"Save Settings"})]})}function $t({enabled:t,interval:s,onToggle:r,onIntervalChange:n,disabled:a}){return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-foreground-secondary"}),e.jsx("span",{className:"font-semibold text-foreground",children:"Scheduled Scans"})]}),e.jsx(Ot,{enabled:t,onToggle:r,disabled:a})]}),e.jsx("p",{className:"text-sm text-foreground-muted",children:"Automatically scan your groups at set intervals"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground-muted",children:"Scan Interval"}),e.jsx("select",{value:s,onChange:d=>n(Number(d.target.value)),disabled:a,className:"bg-card-elevated border border-border text-foreground rounded-lg px-3 py-2 text-sm disabled:opacity-50",children:Gt.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]})}function Ut({groupsPerCycle:t,onGroupsChange:s,disabled:r}){return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-foreground-secondary"}),e.jsx("span",{className:"font-semibold text-foreground",children:"Group Rotation"})]}),e.jsx("p",{className:"text-sm text-foreground-muted",children:"Cycle through groups to avoid detection"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground-muted",children:"Groups per cycle"}),e.jsx("select",{value:t,onChange:n=>s(Number(n.target.value)),disabled:r,className:"bg-card-elevated border border-border text-foreground rounded-lg px-3 py-2 text-sm disabled:opacity-50",children:Et.map(n=>e.jsxs("option",{value:n,children:[n," groups"]},n))})]})]})}function Vt({minDelay:t,maxDelay:s,onDelayChange:r,disabled:n}){const a=`${t}-${s} sec`;return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-foreground-secondary"}),e.jsx("span",{className:"font-semibold text-foreground",children:"Action Delays"})]}),e.jsx("p",{className:"text-sm text-foreground-muted",children:"Human-like delays between actions"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground-muted",children:"Delay range"}),e.jsx("select",{value:a,onChange:d=>{const c=re.find(o=>`${o.min}-${o.max} sec`===d.target.value);c&&r(c.min,c.max)},disabled:n,className:"bg-card-elevated border border-border text-foreground rounded-lg px-3 py-2 text-sm disabled:opacity-50",children:re.map(d=>e.jsx("option",{value:d.label,children:d.label},d.label))})]})]})}function zt({tasks:t}){const s=t.slice(0,3),r=t.length-s.length;return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-foreground-secondary"}),e.jsx("span",{className:"font-semibold text-foreground",children:"Action Queue"})]}),e.jsxs("span",{className:"text-xs bg-card-elevated text-foreground-secondary px-2 py-1 rounded-full",children:[t.length," pending"]})]}),e.jsx("div",{className:"space-y-2",children:s.map(n=>e.jsxs("div",{className:"flex items-center gap-3 bg-card-elevated rounded-lg p-3",children:[e.jsx("div",{className:"w-7 h-7 rounded-md flex items-center justify-center bg-foreground-secondary",children:e.jsx(H,{className:"w-4 h-4 text-background"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:n.groupName||"Scan Group"}),e.jsx("p",{className:"text-xs text-foreground-muted",children:n.status==="running"?"Running...":Bt(n.scheduledAt)})]})]},n.id))}),r>0&&e.jsxs("p",{className:"text-xs text-center text-foreground-muted",children:["+",r," more tasks in queue"]})]})}function Ot({enabled:t,onToggle:s,disabled:r}){return e.jsx("button",{onClick:s,disabled:r,className:`relative w-11 h-6 rounded-full transition-colors ${t?"bg-foreground":"bg-card-elevated"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-background rounded-full shadow transition-transform ${t?"translate-x-5":"translate-x-0"}`})})}function Bt(t){const s=t-Date.now();if(s<=0)return"Now";const r=Math.floor(s/1e3);if(r<60)return`in ${r}s`;const n=Math.floor(r/60);return n<60?`in ${n}m`:`in ${Math.floor(n/60)}h`}function _t(){const[t,s]=i.useState("leads"),[r,n]=i.useState(null),{leads:a,personas:d,activePersonaId:c,settings:o,usage:u,groups:l,sessionLimits:x,apiKey:m,setApiKey:f}=Oe();i.useEffect(()=>{oe.getValue().then(n)},[]);const j=r===null,h=r===!1;return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse text-foreground-muted",children:"Loading..."})}):h?e.jsx(Ct,{onComplete:()=>n(!0)}):e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(Be,{sessionLimits:x,usage:u}),e.jsx(_e,{sessionLimits:x}),e.jsxs("main",{className:"flex-1 overflow-auto p-4",children:[t==="leads"&&e.jsx(ut,{leads:a}),t==="spy"&&e.jsx(Ft,{}),t==="groups"&&e.jsx(ht,{groups:l}),t==="personas"&&e.jsx(yt,{personas:d,activePersonaId:c}),t==="settings"&&o&&x&&e.jsx(Nt,{settings:o,sessionLimits:x,apiKey:m,setApiKey:f})]}),e.jsx(qt,{activeTab:t,setActiveTab:s})]})}function qt({activeTab:t,setActiveTab:s}){const r=[{id:"leads",icon:ce,label:"Leads"},{id:"spy",icon:A,label:"Spy"},{id:"groups",icon:Y,label:"Groups"},{id:"personas",icon:R,label:"Personas"},{id:"settings",icon:de,label:"Settings"}];return e.jsx("nav",{className:"bg-background-secondary border-t border-border h-16 flex items-center justify-around px-6",children:r.map(({id:n,icon:a,label:d})=>e.jsxs("button",{onClick:()=>s(n),className:`flex flex-col items-center gap-1 transition-colors ${t===n?"text-foreground":"text-foreground-muted hover:text-foreground-secondary"}`,children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] font-medium",children:d})]},n))})}ke.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(_t,{})}));
