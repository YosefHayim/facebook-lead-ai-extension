import{c as u,r as x,l as P,w as M,f as G,p as X,a as F,b as L,u as ee,d as g,j as e,S as se,g as te,h as R,i as E,k as ae,m as re,n as ne,R as ce,e as le}from"./sparkles-Bp3MePSl.js";import{C as de,a as D,T as U,P as oe,U as ie,S as xe}from"./user-D2MRRbZ9.js";import{E as k,T as ue}from"./trending-up-BpHWRpaQ.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=u("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=u("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=u("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=u("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=u("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=u("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=u("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=u("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=u("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=u("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=u("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=u("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=u("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function je(){const[s,t]=x.useState([]),[a,r]=x.useState([]),[n,d]=x.useState("default"),[i,o]=x.useState(null),[l,c]=x.useState(null),[h,b]=x.useState([]),[N,j]=x.useState(null),[y,p]=x.useState("");return x.useEffect(()=>{(async()=>{const[m,W,Q,A,Z,Y,J]=await Promise.all([P.getValue(),X.getValue(),F.getValue(),L.getValue(),ee.getValue(),M.getValue(),G.getValue()]);t(m),r(W),d(Q),o(A),c(Z),b(Y),j(J);const v=await g.runtime.sendMessage({type:"GET_API_KEY",provider:A.aiProvider});v!=null&&v.apiKey&&p(v.apiKey)})();const z=P.watch(m=>{m&&t(m)}),O=M.watch(m=>{m&&b(m)}),B=G.watch(m=>{m&&j(m)});return()=>{z(),O(),B()}},[]),{leads:s,personas:a,activePersonaId:n,settings:i,usage:l,groups:h,sessionLimits:N,apiKey:y,setApiKey:p}}function ve({sessionLimits:s,usage:t}){return e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-blue-500"}),e.jsx("h1",{className:"font-semibold text-gray-900",children:"LeadScout AI"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(s==null?void 0:s.isPaused)&&e.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),"Paused"]}),t&&e.jsxs("span",{className:"text-xs text-gray-500",children:[t.leadsFoundToday," today"]})]})]})})}function fe({sessionLimits:s}){const[t,a]=x.useState(!1),[r,n]=x.useState(null),d=async()=>{a(!0),n(null);try{const[l]=await g.tabs.query({active:!0,currentWindow:!0});if(l!=null&&l.id){const c=await g.tabs.sendMessage(l.id,{type:"MANUAL_SCAN"});n(c)}}catch(l){n({postsFound:0,leadsDetected:0,errors:[`Scan failed: ${l}`],timestamp:Date.now()})}finally{a(!1)}},i=(s==null?void 0:s.isPaused)??!1,o=t||i;return e.jsxs("div",{className:"bg-white border-b border-gray-200 p-3",children:[e.jsx("button",{onClick:d,disabled:o,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium text-sm transition-colors ${o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"})," Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"})," Scan This Page"]})}),r&&e.jsx(Ne,{result:r})]})}function Ne({result:s}){const t=s.errors.length>0;return e.jsx("div",{className:`mt-2 text-xs p-2 rounded ${t?"bg-red-50 text-red-600":"bg-green-50 text-green-600"}`,children:t?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),s.errors[0]]}):e.jsxs("span",{children:["Found ",s.postsFound," posts, ",s.leadsDetected," leads detected"]})})}function H(s){return new Date(s).toLocaleDateString()}function T(s){const t=s.match(/facebook\.com\/groups\/([^/?]+)/);return t?t[1]:null}function I(s,t){return`https://www.facebook.com/groups/${s}/search?q=${encodeURIComponent(t.trim())}`}function we({lead:s,copiedId:t,onCopyReply:a,onStatusChange:r,onMarkResponded:n,onMarkGotReply:d,onFeedback:i}){return e.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 pt-3 space-y-3",children:[s.aiAnalysis&&e.jsxs("div",{className:"bg-gray-50 rounded-md p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.aiAnalysis.reasoning})]}),s.aiDraftReply&&e.jsx(ke,{lead:s,copiedId:t,onCopyReply:a}),e.jsx(Se,{lead:s,onMarkResponded:n,onMarkGotReply:d}),e.jsx(Ce,{lead:s,onFeedback:i}),e.jsx(Ae,{lead:s,onStatusChange:r})]})}function ke({lead:s,copiedId:t,onCopyReply:a}){return e.jsxs("div",{className:"bg-blue-50 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Suggested Reply"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),a(s)},className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700",children:t===s.id?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-3 h-3"})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-3 h-3"})," Copy"]})})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.aiDraftReply})]})}function Se({lead:s,onMarkResponded:t,onMarkGotReply:a}){var r,n;return e.jsxs("div",{className:"flex items-center gap-2 py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Track:"}),(r=s.responseTracking)!=null&&r.responded?(n=s.responseTracking)!=null&&n.gotReply?e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"})," Conversation started"]}):e.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-xs px-2 py-1 bg-green-50 text-green-600 rounded hover:bg-green-100",children:[e.jsx(V,{className:"w-3 h-3"})," Got Reply"]}):e.jsxs("button",{onClick:t,className:"flex items-center gap-1 text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:[e.jsx(q,{className:"w-3 h-3"})," I Responded"]})]})}function Ce({lead:s,onFeedback:t}){var a,r;return e.jsxs("div",{className:"flex items-center gap-2 py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Lead quality:"}),e.jsx("button",{onClick:n=>t(n,"good"),className:`p-1.5 rounded ${((a=s.feedback)==null?void 0:a.quality)==="good"?"bg-green-100 text-green-600":"text-gray-400 hover:bg-green-50 hover:text-green-500"}`,children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n=>t(n,"bad"),className:`p-1.5 rounded ${((r=s.feedback)==null?void 0:r.quality)==="bad"?"bg-red-100 text-red-600":"text-gray-400 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(K,{className:"w-4 h-4"})})]})}function Ae({lead:s,onStatusChange:t}){return e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-2",children:[s.status==="new"&&e.jsx("button",{onClick:a=>{a.stopPropagation(),t(s.id,"contacted")},className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Mark Contacted"}),s.status==="contacted"&&e.jsx("button",{onClick:a=>{a.stopPropagation(),t(s.id,"converted")},className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:"Mark Converted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("a",{href:s.postUrl,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"flex items-center gap-1 text-xs text-blue-600 hover:underline",children:[e.jsx(k,{className:"w-3 h-3"})," View Post"]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),t(s.id,"ignored")},className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(U,{className:"w-4 h-4"})})]})]})}function Pe({lead:s,copiedId:t,onCopyReply:a,onStatusChange:r}){const[n,d]=x.useState(!1),i=async c=>{c.stopPropagation(),await R(s.id,{responded:!0,respondedAt:Date.now()}),await E(s.id,"contacted")},o=async c=>{c.stopPropagation(),await R(s.id,{gotReply:!0,repliedAt:Date.now()})},l=async(c,h)=>{c.stopPropagation(),await te(s.id,{quality:h,givenAt:Date.now()})};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>d(!n),children:[e.jsx(Me,{lead:s}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.postText}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[e.jsx("span",{className:"capitalize",children:s.intent.replace("_"," ")}),e.jsx("span",{children:"-"}),e.jsx("span",{children:H(s.createdAt)})]})]}),n&&e.jsx(we,{lead:s,copiedId:t,onCopyReply:a,onStatusChange:r,onMarkResponded:i,onMarkGotReply:o,onFeedback:l})]})}function Me({lead:s}){var t,a;return e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 truncate",children:s.authorName}),e.jsx(Ge,{score:s.leadScore}),((t=s.responseTracking)==null?void 0:t.responded)&&e.jsx(q,{className:"w-3 h-3 text-blue-500",title:"Responded"}),((a=s.responseTracking)==null?void 0:a.gotReply)&&e.jsx(V,{className:"w-3 h-3 text-green-500",title:"Got reply"}),e.jsx(Te,{feedback:s.feedback})]}),s.groupName&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.groupName})]}),e.jsx(Re,{status:s.status})]})}function Ge({score:s}){const t=s>=70?"bg-green-50 text-green-600":s>=50?"bg-amber-50 text-amber-600":"bg-gray-100 text-gray-600";return e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t}`,children:[s,"%"]})}function Re({status:s}){const t=s==="new"?"bg-blue-50 text-blue-600":s==="contacted"?"bg-amber-50 text-amber-600":s==="converted"?"bg-green-50 text-green-600":"bg-gray-100 text-gray-600";return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t}`,children:s})}function Te({feedback:s}){return s?s.quality==="good"?e.jsx(_,{className:"w-3 h-3 text-green-500"}):s.quality==="bad"?e.jsx(K,{className:"w-3 h-3 text-red-500"}):null:null}function Ie({leads:s}){const[t,a]=x.useState("all"),[r,n]=x.useState(null),d=s.filter(l=>t==="all"?!0:l.status===t),i=async l=>{l.aiDraftReply&&(await navigator.clipboard.writeText(l.aiDraftReply),n(l.id),setTimeout(()=>n(null),2e3))},o=async(l,c)=>{await E(l,c)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Fe,{leads:s,filter:t,setFilter:a}),d.length===0?e.jsx(Le,{}):e.jsx("div",{className:"space-y-3",children:d.map(l=>e.jsx(Pe,{lead:l,copiedId:r,onCopyReply:i,onStatusChange:o},l.id))})]})}function Fe({leads:s,filter:t,setFilter:a}){const r={all:s.length,new:s.filter(n=>n.status==="new").length,contacted:s.filter(n=>n.status==="contacted").length,converted:s.filter(n=>n.status==="converted").length};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:t,onChange:n=>a(n.target.value),className:"text-sm border border-gray-200 rounded-md px-2 py-1 bg-white",children:[e.jsxs("option",{value:"all",children:["All (",r.all,")"]}),e.jsxs("option",{value:"new",children:["New (",r.new,")"]}),e.jsxs("option",{value:"contacted",children:["Contacted (",r.contacted,")"]}),e.jsxs("option",{value:"converted",children:["Converted (",r.converted,")"]})]})]})}function Le(){return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ge,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No leads found"}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Scan This Page" on a Facebook group'})]})}function Ee({group:s}){const t=async()=>{await g.runtime.sendMessage({type:"OPEN_GROUP",url:s.url,groupId:s.id})},a=async()=>{await ae(s.id,{isActive:!s.isActive})},r=async()=>{await re(s.id)};return e.jsx("div",{className:`bg-white rounded-lg border p-3 ${s.isActive?"border-gray-200":"border-gray-100 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.category}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.leadsFound," leads â€¢ Last visited ",s.lastVisited?H(s.lastVisited):"Never"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:t,className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",title:"Visit group",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:`p-1.5 rounded ${s.isActive?"text-green-500 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:s.isActive?"Pause":"Activate",children:s.isActive?e.jsx(ye,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded",title:"Remove",children:e.jsx(U,{className:"w-4 h-4"})})]})]})})}function De({groups:s}){const[t,a]=x.useState(""),[r,n]=x.useState(null),[d,i]=x.useState(""),[o,l]=x.useState(""),[c,h]=x.useState("general"),b=async()=>{!d||!o||(await ne({name:o,url:d,category:c,isActive:!0}),i(""),l(""),h("general"))},N=y=>{if(!t.trim())return;const p=T(y.url);p&&window.open(I(p,t),"_blank")},j=(y,p)=>{const w=T(y.url);w&&window.open(I(w,p),"_blank")};return e.jsxs("div",{className:"space-y-4",children:[s.length>0&&e.jsx(Ue,{groups:s,searchQuery:t,setSearchQuery:a,selectedGroupForSearch:r,setSelectedGroupForSearch:n,onSearchInGroup:N,onQuickSearch:j}),e.jsx(Ve,{newGroupUrl:d,setNewGroupUrl:i,newGroupName:o,setNewGroupName:l,newGroupCategory:c,setNewGroupCategory:h,onAddGroup:b}),s.length===0?e.jsx($e,{}):e.jsx(qe,{groups:s})]})}function Ue({groups:s,searchQuery:t,setSearchQuery:a,selectedGroupForSearch:r,setSelectedGroupForSearch:n,onSearchInGroup:d,onQuickSearch:i}){const o=s.find(c=>c.id===r),l=["need help","looking for","recommendations","any suggestions","who can"];return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),"Search in Groups"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:c=>a(c.target.value),placeholder:"Search keywords (e.g., 'need help with website')",className:"flex-1 border border-gray-200 rounded-md px-3 py-2 text-sm",onKeyDown:c=>{c.key==="Enter"&&o&&d(o)}}),e.jsxs("select",{value:r||"",onChange:c=>n(c.target.value||null),className:"border border-gray-200 rounded-md px-3 py-2 text-sm bg-white min-w-[140px]",children:[e.jsx("option",{value:"",children:"Select group"}),s.filter(c=>c.isActive).map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("button",{onClick:()=>o&&d(o),disabled:!t.trim()||!r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white text-sm rounded-md hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"w-4 h-4"}),"Search in Facebook Group"]}),e.jsx("p",{className:"text-xs text-gray-500",children:`Opens Facebook's native search. Click "Scan This Page" on search results to find leads.`}),e.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quick searches:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.map(c=>e.jsx("button",{onClick:()=>{o?i(o,c):a(c)},className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:c},c))})]})]})]})}function Ve({newGroupUrl:s,setNewGroupUrl:t,newGroupName:a,setNewGroupName:r,newGroupCategory:n,setNewGroupCategory:d,onAddGroup:i}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Add Group"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:s,onChange:o=>t(o.target.value),placeholder:"Facebook group URL",className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:o=>r(o.target.value),placeholder:"Group name",className:"flex-1 border border-gray-200 rounded-md px-3 py-2 text-sm"}),e.jsxs("select",{value:n,onChange:o=>d(o.target.value),className:"border border-gray-200 rounded-md px-3 py-2 text-sm bg-white",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"tech",children:"Tech"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"freelance",children:"Freelance"})]})]}),e.jsxs("button",{onClick:i,disabled:!s||!a,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(oe,{className:"w-4 h-4"}),"Add Group"]})]})]})}function $e(){return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No groups added"}),e.jsx("p",{className:"text-sm mt-1",children:"Add Facebook groups to track"})]})}function qe({groups:s}){return e.jsx("div",{className:"space-y-2",children:s.map(t=>e.jsx(Ee,{group:t},t.id))})}function Ke({personas:s,activePersonaId:t}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Configure personas with different keywords and AI tones for various use cases."}),s.map(a=>e.jsx(_e,{persona:a,isActive:a.id===t},a.id))]})}function _e({persona:s,isActive:t}){const a=async()=>{await F.setValue(s.id)};return e.jsxs("div",{className:`bg-white rounded-lg border p-4 ${t?"border-blue-500 ring-1 ring-blue-500":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.role})]}),!t&&e.jsx("button",{onClick:a,className:"text-xs text-blue-600 hover:text-blue-700",children:"Set active"})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Keywords:"})," ",s.keywords.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tone:"})," ",s.aiTone]})]})]})}function He({settings:s,sessionLimits:t,apiKey:a,setApiKey:r}){const n=async(o,l)=>{const c={...s,[o]:l};await L.setValue(c)},d=async()=>{await g.runtime.sendMessage({type:"SET_API_KEY",provider:s.aiProvider,apiKey:a})},i=async()=>{await g.runtime.sendMessage({type:"RESET_SESSION_LIMITS"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ze,{sessionLimits:t,onReset:i}),e.jsx(Oe,{settings:s,apiKey:a,setApiKey:r,onSettingChange:n,onSaveApiKey:d}),e.jsx(Be,{settings:s,onSettingChange:n})]})}function ze({sessionLimits:s,onReset:t}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Session Limits"}),e.jsx("button",{onClick:t,className:"text-xs text-blue-600 hover:text-blue-700",children:"Reset"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Posts/Hour"})]}),e.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[s.postsScannedThisHour," / ",s.maxPostsPerHour]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Groups/Day"})]}),e.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[s.groupsVisitedToday," / ",s.maxGroupsPerDay]})]})]}),s.isPaused&&s.pausedUntil&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-amber-600 text-sm bg-amber-50 p-2 rounded",children:[e.jsx(S,{className:"w-4 h-4"}),"Paused until ",new Date(s.pausedUntil).toLocaleTimeString()]})]})}function Oe({settings:s,apiKey:t,setApiKey:a,onSettingChange:r,onSaveApiKey:n}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"AI Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Provider"}),e.jsxs("select",{value:s.aiProvider,onChange:d=>r("aiProvider",d.target.value),className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm bg-white",children:[e.jsx("option",{value:"gemini",children:"Google Gemini"}),e.jsx("option",{value:"openai",children:"OpenAI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:t,onChange:d=>a(d.target.value),placeholder:`Enter ${s.aiProvider} API key`,className:"flex-1 border border-gray-200 rounded-md px-3 py-2 text-sm"}),e.jsx("button",{onClick:n,className:"px-3 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600",children:"Save"})]})]})]})]})}function Be({settings:s,onSettingChange:t}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Scanning Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan Mode"}),e.jsxs("select",{value:s.scanMode,onChange:a=>t("scanMode",a.target.value),className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm bg-white",children:[e.jsx("option",{value:"manual",children:"Manual (Recommended)"}),e.jsx("option",{value:"auto",children:"Automatic"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manual mode is safer and more Facebook-compliant"})]}),e.jsx(f,{checked:s.isEnabled,onChange:a=>t("isEnabled",a),label:"Enable extension"}),e.jsx(f,{checked:s.autoAnalyze,onChange:a=>t("autoAnalyze",a),label:"Auto-analyze with AI"}),e.jsx(f,{checked:s.showOverlay,onChange:a=>t("showOverlay",a),label:"Show overlay on Facebook"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum lead score: ",s.minLeadScore]}),e.jsx("input",{type:"range",min:"0",max:"100",value:s.minLeadScore,onChange:a=>t("minLeadScore",parseInt(a.target.value)),className:"w-full"})]}),e.jsx(f,{checked:s.transparencyEnabled,onChange:a=>t("transparencyEnabled",a),label:"Add AI disclosure to replies"})]})]})}function f({checked:s,onChange:t,label:a}){return e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:r=>t(r.target.checked),className:"w-4 h-4 text-blue-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:a})]})}function We(){const[s,t]=x.useState("leads"),{leads:a,personas:r,activePersonaId:n,settings:d,usage:i,groups:o,sessionLimits:l,apiKey:c,setApiKey:h}=je();return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(ve,{sessionLimits:l,usage:i}),e.jsx(fe,{sessionLimits:l}),e.jsx(Qe,{activeTab:s,setActiveTab:t}),e.jsxs("main",{className:"flex-1 overflow-auto p-4",children:[s==="leads"&&e.jsx(Ie,{leads:a}),s==="groups"&&e.jsx(De,{groups:o}),s==="personas"&&e.jsx(Ke,{personas:r,activePersonaId:n}),s==="settings"&&d&&l&&e.jsx(He,{settings:d,sessionLimits:l,apiKey:c,setApiKey:h})]})]})}function Qe({activeTab:s,setActiveTab:t}){const a=[{id:"leads",icon:ue,label:"Leads"},{id:"groups",icon:C,label:"Groups"},{id:"personas",icon:ie,label:"Personas"},{id:"settings",icon:xe,label:"Settings"}];return e.jsx("nav",{className:"bg-white border-b border-gray-200 px-2",children:e.jsx("div",{className:"flex gap-1",children:a.map(({id:r,icon:n,label:d})=>e.jsxs("button",{onClick:()=>t(r),className:`flex items-center gap-1.5 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${s===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(n,{className:"w-4 h-4"}),d]},r))})})}ce.createRoot(document.getElementById("root")).render(e.jsx(le.StrictMode,{children:e.jsx(We,{})}));
