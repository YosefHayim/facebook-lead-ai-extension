import{c as u,r as x,l as M,w as P,f as G,p as X,a as L,b as F,u as ee,d as g,j as e,S as se,g as te,h as R,i as E,k as ae,m as re,n as ne,R as ce,e as le}from"./sparkles-Bp3MePSl.js";import{C as oe,a as D,T as V,P as ie,U as de,S as xe}from"./user-D2MRRbZ9.js";import{E as k,T as ue}from"./trending-up-BpHWRpaQ.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=u("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=u("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=u("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=u("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=u("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=u("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=u("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=u("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=u("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=u("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=u("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=u("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=u("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=u("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=u("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=u("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=u("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function we(){const[s,t]=x.useState([]),[a,r]=x.useState([]),[n,o]=x.useState("default"),[d,i]=x.useState(null),[l,c]=x.useState(null),[m,b]=x.useState([]),[N,j]=x.useState(null),[y,p]=x.useState("");return x.useEffect(()=>{(async()=>{const[h,Y,W,A,Z,Q,J]=await Promise.all([M.getValue(),X.getValue(),L.getValue(),F.getValue(),ee.getValue(),P.getValue(),G.getValue()]);t(h),r(Y),o(W),i(A),c(Z),b(Q),j(J);const f=await g.runtime.sendMessage({type:"GET_API_KEY",provider:A.aiProvider});f!=null&&f.apiKey&&p(f.apiKey)})();const K=M.watch(h=>{h&&t(h)}),O=P.watch(h=>{h&&b(h)}),B=G.watch(h=>{h&&j(h)});return()=>{K(),O(),B()}},[]),{leads:s,personas:a,activePersonaId:n,settings:d,usage:l,groups:m,sessionLimits:N,apiKey:y,setApiKey:p}}function ke({sessionLimits:s,usage:t}){return e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-blue-500"}),e.jsx("h1",{className:"font-semibold text-gray-900",children:"LeadScout AI"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(s==null?void 0:s.isPaused)&&e.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),"Paused"]}),t&&e.jsxs("span",{className:"text-xs text-gray-500",children:[t.leadsFoundToday," today"]})]})]})})}function Se({sessionLimits:s}){const[t,a]=x.useState(!1),[r,n]=x.useState(null),o=async()=>{a(!0),n(null);try{const[l]=await g.tabs.query({active:!0,currentWindow:!0});if(l!=null&&l.id){const c=await g.tabs.sendMessage(l.id,{type:"MANUAL_SCAN"});n(c)}}catch(l){n({postsFound:0,leadsDetected:0,errors:[`Scan failed: ${l}`],timestamp:Date.now()})}finally{a(!1)}},d=(s==null?void 0:s.isPaused)??!1,i=t||d;return e.jsxs("div",{className:"bg-white border-b border-gray-200 p-3",children:[e.jsx("button",{onClick:o,disabled:i,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium text-sm transition-colors ${i?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 animate-spin"})," Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4"})," Scan This Page"]})}),r&&e.jsx(Ce,{result:r})]})}function Ce({result:s}){const t=s.errors.length>0;return e.jsx("div",{className:`mt-2 text-xs p-2 rounded ${t?"bg-red-50 text-red-600":"bg-green-50 text-green-600"}`,children:t?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),s.errors[0]]}):e.jsxs("span",{children:["Found ",s.postsFound," posts, ",s.leadsDetected," leads detected"]})})}function z(s){return new Date(s).toLocaleDateString()}function T(s){const t=s.match(/facebook\.com\/groups\/([^/?]+)/);return t?t[1]:null}function I(s,t){return`https://www.facebook.com/groups/${s}/search?q=${encodeURIComponent(t.trim())}`}function Ae({lead:s,copiedId:t,onCopyReply:a,onStatusChange:r,onMarkResponded:n,onMarkGotReply:o,onFeedback:d}){return e.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 pt-3 space-y-3",children:[s.aiAnalysis&&e.jsxs("div",{className:"bg-gray-50 rounded-md p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.aiAnalysis.reasoning})]}),s.aiDraftReply&&e.jsx(Me,{lead:s,copiedId:t,onCopyReply:a}),e.jsx(Pe,{lead:s,onMarkResponded:n,onMarkGotReply:o}),e.jsx(Ge,{lead:s,onFeedback:d}),e.jsx(Re,{lead:s,onStatusChange:r})]})}function Me({lead:s,copiedId:t,onCopyReply:a}){return e.jsxs("div",{className:"bg-blue-50 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Suggested Reply"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),a(s)},className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700",children:t===s.id?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-3 h-3"})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-3 h-3"})," Copy"]})})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.aiDraftReply})]})}function Pe({lead:s,onMarkResponded:t,onMarkGotReply:a}){var r,n;return e.jsxs("div",{className:"flex items-center gap-2 py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Track:"}),(r=s.responseTracking)!=null&&r.responded?(n=s.responseTracking)!=null&&n.gotReply?e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"})," Conversation started"]}):e.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-xs px-2 py-1 bg-green-50 text-green-600 rounded hover:bg-green-100",children:[e.jsx(U,{className:"w-3 h-3"})," Got Reply"]}):e.jsxs("button",{onClick:t,className:"flex items-center gap-1 text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:[e.jsx(_,{className:"w-3 h-3"})," I Responded"]})]})}function Ge({lead:s,onFeedback:t}){var a,r;return e.jsxs("div",{className:"flex items-center gap-2 py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Lead quality:"}),e.jsx("button",{onClick:n=>t(n,"good"),className:`p-1.5 rounded ${((a=s.feedback)==null?void 0:a.quality)==="good"?"bg-green-100 text-green-600":"text-gray-400 hover:bg-green-50 hover:text-green-500"}`,children:e.jsx($,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n=>t(n,"bad"),className:`p-1.5 rounded ${((r=s.feedback)==null?void 0:r.quality)==="bad"?"bg-red-100 text-red-600":"text-gray-400 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(q,{className:"w-4 h-4"})})]})}function Re({lead:s,onStatusChange:t}){return e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-2",children:[s.status==="new"&&e.jsx("button",{onClick:a=>{a.stopPropagation(),t(s.id,"contacted")},className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Mark Contacted"}),s.status==="contacted"&&e.jsx("button",{onClick:a=>{a.stopPropagation(),t(s.id,"converted")},className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:"Mark Converted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("a",{href:s.postUrl,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"flex items-center gap-1 text-xs text-blue-600 hover:underline",children:[e.jsx(k,{className:"w-3 h-3"})," View Post"]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),t(s.id,"ignored")},className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(V,{className:"w-4 h-4"})})]})]})}function Te({lead:s,copiedId:t,onCopyReply:a,onStatusChange:r}){const[n,o]=x.useState(!1),d=async c=>{c.stopPropagation(),await R(s.id,{responded:!0,respondedAt:Date.now()}),await E(s.id,"contacted")},i=async c=>{c.stopPropagation(),await R(s.id,{gotReply:!0,repliedAt:Date.now()})},l=async(c,m)=>{c.stopPropagation(),await te(s.id,{quality:m,givenAt:Date.now()})};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>o(!n),children:[e.jsx(Ie,{lead:s}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.postText}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[e.jsx("span",{className:"capitalize",children:s.intent.replace("_"," ")}),e.jsx("span",{children:"-"}),e.jsx("span",{children:z(s.createdAt)})]})]}),n&&e.jsx(Ae,{lead:s,copiedId:t,onCopyReply:a,onStatusChange:r,onMarkResponded:d,onMarkGotReply:i,onFeedback:l})]})}function Ie({lead:s}){var t,a;return e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 truncate",children:s.authorName}),e.jsx(Le,{score:s.leadScore}),((t=s.responseTracking)==null?void 0:t.responded)&&e.jsx(_,{className:"w-3 h-3 text-blue-500",title:"Responded"}),((a=s.responseTracking)==null?void 0:a.gotReply)&&e.jsx(U,{className:"w-3 h-3 text-green-500",title:"Got reply"}),e.jsx(Ee,{feedback:s.feedback})]}),s.groupName&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.groupName})]}),e.jsx(Fe,{status:s.status})]})}function Le({score:s}){const t=s>=70?"bg-green-50 text-green-600":s>=50?"bg-amber-50 text-amber-600":"bg-gray-100 text-gray-600";return e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t}`,children:[s,"%"]})}function Fe({status:s}){const t=s==="new"?"bg-blue-50 text-blue-600":s==="contacted"?"bg-amber-50 text-amber-600":s==="converted"?"bg-green-50 text-green-600":"bg-gray-100 text-gray-600";return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t}`,children:s})}function Ee({feedback:s}){return s?s.quality==="good"?e.jsx($,{className:"w-3 h-3 text-green-500"}):s.quality==="bad"?e.jsx(q,{className:"w-3 h-3 text-red-500"}):null:null}function De({leads:s}){const[t,a]=x.useState("all"),[r,n]=x.useState(null),o=s.filter(l=>t==="all"?!0:l.status===t),d=async l=>{l.aiDraftReply&&(await navigator.clipboard.writeText(l.aiDraftReply),n(l.id),setTimeout(()=>n(null),2e3))},i=async(l,c)=>{await E(l,c)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ve,{leads:s,filter:t,setFilter:a}),o.length===0?e.jsx(Ue,{}):e.jsx("div",{className:"space-y-3",children:o.map(l=>e.jsx(Te,{lead:l,copiedId:r,onCopyReply:d,onStatusChange:i},l.id))})]})}function Ve({leads:s,filter:t,setFilter:a}){const r={all:s.length,new:s.filter(n=>n.status==="new").length,contacted:s.filter(n=>n.status==="contacted").length,converted:s.filter(n=>n.status==="converted").length};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:t,onChange:n=>a(n.target.value),className:"text-sm border border-gray-200 rounded-md px-2 py-1 bg-white",children:[e.jsxs("option",{value:"all",children:["All (",r.all,")"]}),e.jsxs("option",{value:"new",children:["New (",r.new,")"]}),e.jsxs("option",{value:"contacted",children:["Contacted (",r.contacted,")"]}),e.jsxs("option",{value:"converted",children:["Converted (",r.converted,")"]})]})]})}function Ue(){return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(fe,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No leads found"}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Scan This Page" on a Facebook group'})]})}function He({group:s}){const t=async()=>{await g.runtime.sendMessage({type:"OPEN_GROUP",url:s.url,groupId:s.id})},a=async()=>{await ae(s.id,{isActive:!s.isActive})},r=async()=>{await re(s.id)};return e.jsx("div",{className:`bg-white rounded-lg border p-3 ${s.isActive?"border-gray-200":"border-gray-100 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.category}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.leadsFound," leads â€¢ Last visited ",s.lastVisited?z(s.lastVisited):"Never"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:t,className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",title:"Visit group",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:`p-1.5 rounded ${s.isActive?"text-green-500 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:s.isActive?"Pause":"Activate",children:s.isActive?e.jsx(ve,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded",title:"Remove",children:e.jsx(V,{className:"w-4 h-4"})})]})]})})}function _e({groups:s}){const[t,a]=x.useState(""),[r,n]=x.useState(null),[o,d]=x.useState(""),[i,l]=x.useState(""),[c,m]=x.useState("general"),b=async()=>{!o||!i||(await ne({name:i,url:o,category:c,isActive:!0}),d(""),l(""),m("general"))},N=y=>{if(!t.trim())return;const p=T(y.url);p&&window.open(I(p,t),"_blank")},j=(y,p)=>{const w=T(y.url);w&&window.open(I(w,p),"_blank")};return e.jsxs("div",{className:"space-y-4",children:[s.length>0&&e.jsx(qe,{groups:s,searchQuery:t,setSearchQuery:a,selectedGroupForSearch:r,setSelectedGroupForSearch:n,onSearchInGroup:N,onQuickSearch:j}),e.jsx($e,{newGroupUrl:o,setNewGroupUrl:d,newGroupName:i,setNewGroupName:l,newGroupCategory:c,setNewGroupCategory:m,onAddGroup:b}),s.length===0?e.jsx(ze,{}):e.jsx(Ke,{groups:s})]})}function qe({groups:s,searchQuery:t,setSearchQuery:a,selectedGroupForSearch:r,setSelectedGroupForSearch:n,onSearchInGroup:o,onQuickSearch:d}){const i=s.find(c=>c.id===r),l=["need help","looking for","recommendations","any suggestions","who can"];return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Search in Groups"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:c=>a(c.target.value),placeholder:"Search keywords (e.g., 'need help with website')",className:"flex-1 border border-gray-200 rounded-md px-3 py-2 text-sm",onKeyDown:c=>{c.key==="Enter"&&i&&o(i)}}),e.jsxs("select",{value:r||"",onChange:c=>n(c.target.value||null),className:"border border-gray-200 rounded-md px-3 py-2 text-sm bg-white min-w-[140px]",children:[e.jsx("option",{value:"",children:"Select group"}),s.filter(c=>c.isActive).map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("button",{onClick:()=>i&&o(i),disabled:!t.trim()||!r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white text-sm rounded-md hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"w-4 h-4"}),"Search in Facebook Group"]}),e.jsx("p",{className:"text-xs text-gray-500",children:`Opens Facebook's native search. Click "Scan This Page" on search results to find leads.`}),e.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quick searches:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.map(c=>e.jsx("button",{onClick:()=>{i?d(i,c):a(c)},className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:c},c))})]})]})]})}function $e({newGroupUrl:s,setNewGroupUrl:t,newGroupName:a,setNewGroupName:r,newGroupCategory:n,setNewGroupCategory:o,onAddGroup:d}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Add Group"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:s,onChange:i=>t(i.target.value),placeholder:"Facebook group URL",className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:i=>r(i.target.value),placeholder:"Group name",className:"flex-1 border border-gray-200 rounded-md px-3 py-2 text-sm"}),e.jsxs("select",{value:n,onChange:i=>o(i.target.value),className:"border border-gray-200 rounded-md px-3 py-2 text-sm bg-white",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"tech",children:"Tech"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"freelance",children:"Freelance"})]})]}),e.jsxs("button",{onClick:d,disabled:!s||!a,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{className:"w-4 h-4"}),"Add Group"]})]})]})}function ze(){return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No groups added"}),e.jsx("p",{className:"text-sm mt-1",children:"Add Facebook groups to track"})]})}function Ke({groups:s}){return e.jsx("div",{className:"space-y-2",children:s.map(t=>e.jsx(He,{group:t},t.id))})}function Oe({personas:s,activePersonaId:t}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Configure personas with different keywords and AI tones for various use cases."}),s.map(a=>e.jsx(Be,{persona:a,isActive:a.id===t},a.id))]})}function Be({persona:s,isActive:t}){const a=async()=>{await L.setValue(s.id)};return e.jsxs("div",{className:`bg-white rounded-lg border p-4 ${t?"border-blue-500 ring-1 ring-blue-500":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.role})]}),!t&&e.jsx("button",{onClick:a,className:"text-xs text-blue-600 hover:text-blue-700",children:"Set active"})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Keywords:"})," ",s.keywords.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tone:"})," ",s.aiTone]})]})]})}function Ye({settings:s,sessionLimits:t,apiKey:a,setApiKey:r}){const n=async(i,l)=>{const c={...s,[i]:l};await F.setValue(c)},o=async()=>{await g.runtime.sendMessage({type:"SET_API_KEY",provider:s.aiProvider,apiKey:a})},d=async()=>{await g.runtime.sendMessage({type:"RESET_SESSION_LIMITS"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(We,{sessionLimits:t,onReset:d}),e.jsx(Ze,{settings:s,apiKey:a,setApiKey:r,onSettingChange:n,onSaveApiKey:o}),e.jsx(Qe,{settings:s,onSettingChange:n})]})}function We({sessionLimits:s,onReset:t}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Session Limits"}),e.jsx("button",{onClick:t,className:"text-xs text-blue-600 hover:text-blue-700",children:"Reset"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Posts/Hour"})]}),e.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[s.postsScannedThisHour," / ",s.maxPostsPerHour]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Groups/Day"})]}),e.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[s.groupsVisitedToday," / ",s.maxGroupsPerDay]})]})]}),s.isPaused&&s.pausedUntil&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-amber-600 text-sm bg-amber-50 p-2 rounded",children:[e.jsx(S,{className:"w-4 h-4"}),"Paused until ",new Date(s.pausedUntil).toLocaleTimeString()]})]})}function Ze({settings:s,apiKey:t,setApiKey:a,onSettingChange:r,onSaveApiKey:n}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"AI Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Provider"}),e.jsxs("select",{value:s.aiProvider,onChange:o=>r("aiProvider",o.target.value),className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm bg-white",children:[e.jsx("option",{value:"gemini",children:"Google Gemini"}),e.jsx("option",{value:"openai",children:"OpenAI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:t,onChange:o=>a(o.target.value),placeholder:`Enter ${s.aiProvider} API key`,className:"flex-1 border border-gray-200 rounded-md px-3 py-2 text-sm"}),e.jsx("button",{onClick:n,className:"px-3 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600",children:"Save"})]})]})]})]})}function Qe({settings:s,onSettingChange:t}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Scanning Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan Mode"}),e.jsxs("select",{value:s.scanMode,onChange:a=>t("scanMode",a.target.value),className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm bg-white",children:[e.jsx("option",{value:"manual",children:"Manual (Recommended)"}),e.jsx("option",{value:"auto",children:"Automatic"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manual mode is safer and more Facebook-compliant"})]}),e.jsx(v,{checked:s.isEnabled,onChange:a=>t("isEnabled",a),label:"Enable extension"}),e.jsx(v,{checked:s.autoAnalyze,onChange:a=>t("autoAnalyze",a),label:"Auto-analyze with AI"}),e.jsx(v,{checked:s.showOverlay,onChange:a=>t("showOverlay",a),label:"Show overlay on Facebook"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum lead score: ",s.minLeadScore]}),e.jsx("input",{type:"range",min:"0",max:"100",value:s.minLeadScore,onChange:a=>t("minLeadScore",parseInt(a.target.value)),className:"w-full"})]}),e.jsx(v,{checked:s.transparencyEnabled,onChange:a=>t("transparencyEnabled",a),label:"Add AI disclosure to replies"})]})]})}function v({checked:s,onChange:t,label:a}){return e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:r=>t(r.target.checked),className:"w-4 h-4 text-blue-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:a})]})}function Je(){const[s,t]=x.useState("leads"),{leads:a,personas:r,activePersonaId:n,settings:o,usage:d,groups:i,sessionLimits:l,apiKey:c,setApiKey:m}=we();return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(ke,{sessionLimits:l,usage:d}),e.jsx(Se,{sessionLimits:l}),e.jsx(Xe,{activeTab:s,setActiveTab:t}),e.jsxs("main",{className:"flex-1 overflow-auto p-4",children:[s==="leads"&&e.jsx(De,{leads:a}),s==="groups"&&e.jsx(_e,{groups:i}),s==="personas"&&e.jsx(Oe,{personas:r,activePersonaId:n}),s==="settings"&&o&&l&&e.jsx(Ye,{settings:o,sessionLimits:l,apiKey:c,setApiKey:m})]}),e.jsx(es,{})]})}function Xe({activeTab:s,setActiveTab:t}){const a=[{id:"leads",icon:ue,label:"Leads"},{id:"groups",icon:C,label:"Groups"},{id:"personas",icon:de,label:"Personas"},{id:"settings",icon:xe,label:"Settings"}];return e.jsx("nav",{className:"bg-white border-b border-gray-200 px-2",children:e.jsx("div",{className:"flex gap-1",children:a.map(({id:r,icon:n,label:o})=>e.jsxs("button",{onClick:()=>t(r),className:`flex items-center gap-1.5 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${s===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(n,{className:"w-4 h-4"}),o]},r))})})}function es(){return e.jsx("footer",{className:"bg-white border-t border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("span",{children:"Made with"}),e.jsx(be,{className:"w-3 h-3 text-red-500 fill-red-500"}),e.jsx("span",{children:"by"}),e.jsx("a",{href:"https://github.com/YosefHayim",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-700 hover:text-blue-600",children:"Yosef"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:"https://github.com/YosefHayim",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-700 transition-colors",title:"GitHub",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("a",{href:"https://buymeacoffee.com/yosefhayim",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-amber-500 transition-colors",title:"Buy me a coffee",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("a",{href:"https://www.linkedin.com/in/yosef-hayim-sabag",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-600 transition-colors",title:"LinkedIn",children:e.jsx(je,{className:"w-4 h-4"})})]})]})})}ce.createRoot(document.getElementById("root")).render(e.jsx(le.StrictMode,{children:e.jsx(Je,{})}));
